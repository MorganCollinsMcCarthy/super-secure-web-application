<!DOCTYPE html>
<html xmlns:th="http://www.w3.org/1999/xhtml" xmlns:sec="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Super Secure Web Application</title>
    <link rel="stylesheet" type="text/css" th:href="@{/styles.css}">
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark" xmlns:sec="http://www.w3.org/1999/xhtml">
        <div class="container px-5">
            <a class="navbar-brand" href="/">Super Secure Web Application</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                    <li class="nav-item"><a class="nav-link" href="/forum">Forum</a></li>
                    <li class="nav-item" sec:authorize="hasRole('USER')"><a class="nav-link"
                            href="/bookAppointment">Book
                            Vaccination</a></li>
                    <li class="nav-item" sec:authorize="!isAuthenticated()"><a class="nav-link" href="/login">Login</a>
                    </li>
                    <li class="nav-item" sec:authorize="isAuthenticated()"><a class="nav-link" href="/logout">Logout</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <div class="row justify-content-center align-items-center h-100">
        <div class="col-12 col-lg-9 col-xl-7">
            <div class="card-body p-4 p-md-5">
                <h3 class="mb-3 pb-2 pb-md-0 mb-md-5">Registration Form</h3>
                <div th:if="${success}">
                    <p>
                        Scan this Barcode using Google Authenticator app on your phone
                        to use it later in login:
                    </p>
                    <img class="alert alert-success" th:src="${success}">
                    <br>
                    <a class="btn btn-primary" th:href="@{/login}">Click here to login</a>
                </div>
                <div th:if="${error}" class="mb-3">
                    <h1 class="alert alert-danger" th:text="${error}"></h1>
                </div>
                <form th:if="${success == null}" th:action="/registration" th:object="${user}" method="POST" enctype="utf8">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <div class="form-outline">
                                <input class="form-control" name="first_name" placeholder="Firstname" type="text" required
                                    th:field="*{first_name}">
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="form-outline">
                                <input class="form-control" name="surname" placeholder="Surname"  type="text" required
                                    th:field="*{surname}">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <div class="form-outline">
                                <input class="form-control" type="date" name="date_of_birth" placeholder="Date of Birth"
                                    required th:field="*{date_of_birth}">
                            </div>
                        </div>
                        <div class="col-md-6 mb-4">
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="gender" id="femaleGender"
                                    value="female" checked />
                                <label class="form-check-label" for="femaleGender">Female</label>
                            </div>

                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="gender" id="maleGender"
                                    value="male" />
                                <label class="form-check-label" for="maleGender">Male</label>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <div class="form-outline">
                                <input class="form-control" name="phone_number" placeholder="Phone Number" type="tel" required
                                    th:field="*{phone_number}">
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="form-outline">
                                <input class="form-control" name="userName" placeholder="Email" type="email" required
                                    th:field="*{userName}">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <div class="form-outline">
                                <input class="form-control" name="nationality" placeholder="Nationality" type="text" required
                                    th:field="*{nationality}">

                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="form-outline">
                                <input class="form-control" name="ppsn" placeholder="PPSN" required th:field="*{ppsn}">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <div class="form-outline">
                                <input class="form-control" name="password" placeholder="Password" type="password"
                                    required th:field="*{password}">
                            </div>
                        </div>
                    </div>
                    <input class="btn btn-primary" type="submit" value="Submit" />
                </form>
            </div>
        </div>
    </div>
</body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

</html>